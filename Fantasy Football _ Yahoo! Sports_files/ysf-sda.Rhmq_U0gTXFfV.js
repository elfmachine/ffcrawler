
YUI.add('media-overlay-surround',function(Y){var doc_height=null;Y.namespace('Sports.Plugin.Overlay.Surround');Y.Sports.Plugin.Overlay.Surround=Y.Base.create('YSOverlaySurroundPlugin',Y.Plugin.Base,[],{_handles:{},_oSides:{'L':{title:'left',valid:false,avail:0,adjacent:['T','B']},'R':{title:'right',valid:false,avail:0,adjacent:['T','B']},'T':{title:'top',valid:false,avail:0,adjacent:['L','R']},'B':{title:'bottom',valid:false,avail:0,adjacent:['L','R']}},_sNode:null,_resizing:false,initializer:function(){var oPlug=this,oHost=oPlug.get('host');if(oHost.get('rendered')){oPlug.bindUI();}else{oPlug._handles.afterHostBindUI=oPlug.afterHostMethod('bindUI',function(){oPlug.bindUI();oPlug._handles.afterHostBindUI.detach();delete oPlug._handles.afterHostBindUI;});}},bindUI:function(){var oPlug=this,oHost=oPlug.get('host');oPlug._handles.afterHostVisibleChange=oHost.on('visibleChange',Y.bind(oPlug.afterHostVisibleChange,oPlug));},_bindResetAlignOnResize:function(){var oPlug=this;if(oPlug.get('resetAlignOnResize')&&!oPlug._handles.onWindowResize){oPlug._handles.onWindowResize=Y.on('windowresize',Y.bind(oPlug.onWindowResize,oPlug));}},_detachResetAlignOnResize:function(){var oPlug=this;if(oPlug._handles.onWindowResize){oPlug._handles.onWindowResize.detach();delete oPlug._handles.onWindowResize;}},beforeHostVisibleChange:function(e){var oPlug=this;if(e.newVal){oPlug._surround();}},afterHostVisibleChange:function(e){var oPlug=this;if(e.newVal){oPlug._bindResetAlignOnResize();}else{oPlug._detachResetAlignOnResize();}},onWindowResize:function(){if(Y.Lang.isUndefined(window.attachEvent)||(doc_height!==document.documentElement.clientHeight)){var oPlug=this;if(!oPlug._resizing){oPlug._resizing=true;Y.later(1500,{},function(){oPlug._surround();if(oPlug.get('indicator')){oPlug.showIndicator();}
oPlug._resizing=false;});}
doc_height=document.documentElement.clientHeight;}},_getBestSurroundSide:function(){var oPlug=this,s_enabled=oPlug.get('surround.enabled'),s_node=oPlug._sNode,s_sides=oPlug.get('surround.sides'),s_sides_str='',docScrollX,docScrollY,winHeight,winWidth,nodeXY,final_side;if(s_enabled&&s_node){s_sides=(s_sides&&s_sides.length>0)?s_sides:['R','L','T','B'];s_sides_str=s_sides.join();docScrollX=s_node.get('docScrollX');docScrollY=s_node.get('docScrollY');winHeight=s_node.get('winHeight');winWidth=s_node.get('winWidth');nodeXY=s_node.getXY();final_side=s_sides[0];Y.each(oPlug._oSides,function(v,k){oPlug._oSides[k].valid=(s_sides_str.indexOf(k)>-1);});oPlug._oSides.T.avail=nodeXY[1]-docScrollY;oPlug._oSides.L.avail=nodeXY[0]-docScrollX;oPlug._oSides.R.avail=winWidth-(oPlug._oSides.L.avail+s_node.get('offsetHeight'));oPlug._oSides.B.avail=winHeight-(oPlug._oSides.T.avail+s_node.get('offsetHeight'));Y.each(oPlug._oSides,function(v,k){if(v.valid&&(v.avail>oPlug._oSides[final_side].avail)){final_side=k;}});return final_side;}},_surround:function(force_side){var oPlug=this,side=(force_side&&oPlug._oSides[force_side])?force_side:oPlug._getBestSurroundSide(),oHost=oPlug.get('host'),boundingBox=oHost.get('boundingBox'),contentBox=oHost.get('contentBox'),indicator=oPlug.get('indicator'),indicatorNode=oPlug.get('indicatorNode'),surroundNode=oPlug.get('surround.node'),scrollX=contentBox.get('docScrollX'),scrollY=contentBox.get('docScrollY'),winWidth=contentBox.get('winWidth'),winHeight=contentBox.get('winHeight'),s_x=0,s_y=0,s_w=0,s_h=0,cb_x=0,cb_y=0,cb_w=0,cb_h=0,ind_x=0,ind_y=0,ind_w=0,ind_h=0,validateX=function(x,w){var right_edge=(scrollX+winWidth),new_x=0;if(scrollX<s_x&&x<scrollX){return scrollX;}
if(right_edge>(s_x+s_w)&&(x+w)>right_edge){new_x=(right_edge-w);if(new_x<x){return new_x;}}
return x;},validateY=function(y,h){var bottom_edge=(scrollY+winHeight),new_y=0;if(scrollY<s_y&&y<scrollY){return scrollY;}
if(bottom_edge>(s_y+s_h)&&(y+h)>bottom_edge){new_y=(bottom_edge-h);if(new_y<y){return new_y;}}
return y;};if(surroundNode){if(indicator&&indicatorNode){indicatorNode.setStyles({'zIndex':oHost.get('contentBox').getStyle('zIndex')+1});ind_w=parseInt(indicatorNode.get('offsetWidth'),10);ind_h=parseInt(indicatorNode.get('offsetHeight'),10);}
cb_h=parseInt(contentBox.get('offsetHeight'),10);cb_w=parseInt(contentBox.get('offsetWidth'),10);s_x=surroundNode.getX();s_y=surroundNode.getY();s_w=surroundNode.get('offsetWidth');s_h=surroundNode.get('offsetHeight');switch(side){case'T':if(indicator&&indicatorNode){ind_x=(s_x+(s_w/2))-(ind_w/2);ind_y=(s_y-ind_h);}
cb_x=validateX((s_x+(s_w/2))-(cb_w/2),cb_w);cb_y=(s_y-(ind_h+cb_h));break;case'R':if(indicator&&indicatorNode){ind_x=(s_x+s_w);ind_y=(s_y+s_h/2)-ind_h/2;}
cb_x=(s_x+s_w+ind_w);cb_y=validateY((s_y+s_h/2)-cb_h/2,cb_h);break;case'B':if(indicator&&indicatorNode){ind_x=(s_x+(s_w/2))-(ind_w/2);ind_y=(s_y+s_h);}
cb_x=validateX((s_x+(s_w/2))-(cb_w/2),cb_w);cb_y=(s_y+s_h+ind_h);break;case'L':if(indicator&&indicatorNode){ind_x=(s_x-ind_w);ind_y=(s_y+s_h/2)-ind_h/2;}
cb_x=(s_x-(ind_w+cb_w));cb_y=validateY((s_y+s_h/2)-cb_h/2,cb_h);break;}
if(indicator&&indicatorNode){indicatorNode.setStyles({'left':ind_x+'px','top':ind_y+'px'});}
contentBox.setStyles({'left':cb_x+'px','top':cb_y+'px'});Y.some(oPlug._oSides,function(v,k){var className=oHost.getClassName()+'-surround-'+k;if(boundingBox.hasClass(className)){boundingBox.removeClass(className);}});boundingBox.addClass(oHost.getClassName()+'-surround-'+side);if(!force_side&&((indicator&&indicatorNode&&(ind_h!==parseInt(indicatorNode.get('offsetHeight'),10)||ind_w!==parseInt(indicatorNode.get('offsetWidth'),10)))||(cb_h!==parseInt(contentBox.get('offsetHeight'),10)||cb_w!==parseInt(contentBox.get('offsetWidth'),10)))){oPlug._surround(force_side);}}},showIndicator:function(){var indicatorNode=this.get('indicatorNode');if(indicatorNode){indicatorNode.setStyle('visibility','');}},hideIndicator:function(){var indicatorNode=this.get('indicatorNode');if(indicatorNode){indicatorNode.setStyle('visibility','hidden');}}},{ATTRS:{'indicator':{value:false,validator:Y.Lang.isBoolean,setter:function(val){var oPlug=this,oHost=oPlug.get('host'),boundingBox=oHost.get('boundingBox'),indicatorNode=oPlug.get('indicatorNode');if(val&&!indicatorNode){indicatorNode=Y.Node.create('<h6 class="'+oHost.getClassName()+'-indicator">More Information</h6>');boundingBox.append(indicatorNode);oPlug.set('indicatorNode',indicatorNode);}else if(!val){oPlug.hideIndicator();}else{oPlug.showIndicator();}},lazyAdd:false},'indicatorNode':{value:null,setter:function(val){var node=null;if(!Y.Lang.isNull(val)&&!Y.Lang.isString(val)&&!Y.instanceOf(val,Y.Node)){Y.log('IndicatorNode value was not a Node instance or selector string.  IndicatorNode not set.');}else if(Y.Lang.isString(val)){node=Y.one(val);}else{node=val;}
return node;}},'resetAlignOnResize':{value:false,validator:Y.Lang.isBoolean,setter:function(val){var oPlug=this,oHost=oPlug.get('host');if(val&&oHost.get('visible')){oPlug._bindResetAlignOnResize();}else if(!val){oPlug._detachResetAlignOnResize();}},lazyAdd:false},'surround':{value:{node:null,enabled:false,sides:[],buffer:0},validator:function(val){var valid=true;if(!Y.Lang.isObject(val)){return false;}
Y.some(val,function(v,k){if(k!=='node'&&k!=='enabled'&&k!=='sides'&&k!=='buffer'){Y.log('Key passed to surround setter is invalid');valid=false;return true;}
if((k==='node'&&(!Y.Lang.isString(v)&&!Y.instanceOf(v,Y.Node)))||(k==='enabled'&&!Y.Lang.isBoolean(v))||(k==='sides'&&!Y.Lang.isArray(v))||(k==='buffer'&&!Y.Lang.isNumber(v))){Y.log('Value passed to surround.'+k+' was of wrong type.');valid=false;return true;}});return valid;},setter:function(val){var oPlug=this,oHost=oPlug.get('host'),node=val.node,oldNode=oPlug._sNode,valid=true,oSides={};if(node&&Y.Lang.isString(node)){node=Y.one(node);if(node){oPlug._sNode=node;}else{valid=false;Y.log('surround.node not valid.  surround not set.');}}else if(node){oPlug._sNode=node;}else{oPlug._sNode=null;}
if(oPlug._sNode){oPlug._handles.beforeHostVisibleChange=oHost.before('visibleChange',Y.bind(oPlug.beforeHostVisibleChange,oPlug));}else if(oPlug._handles.beforeHostVisibleChange){oPlug._handles.beforeHostVisibleChange.detach();delete oPlug._handles.beforeHostVisibleChange;}
if(val.sides){if(val.sides.length>4){valid=false;Y.log('surround.sides contains too many contraint characters.  surround not set');}
if(valid){Y.some(val.sides,function(v){if(!oPlug._oSides[v]){valid=false;Y.log('surround.sides contains invalid side characters.  surround not set.');return true;}
if(oSides[v]){valid=false;Y.log('surround.sides contains duplicate characters.  surround not set.');return true;}
oSides[v]=true;});}}
if(!valid){return Y.Attribute.INVALID_VALUE;}
if(val.enabled){oHost.get('boundingBox').setStyles({'height':0,'width':0});}else{oHost.get('boundingBox').setStyles({'height':'','width':''});}
if(oHost.get('visible')&&node&&oldNode!==node){oPlug._surround();}
oHost.set('align',null);}}},NS:'yssurround'});},'',{'requires':['plugin','base-build','node-screen','event-resize']});YUI.add('media-overlay-close',function(Y){Y.namespace('Sports.Plugin.Overlay.Close');Y.Sports.Plugin.Overlay.Close=Y.Base.create('YSOverlayClosePlugin',Y.Plugin.Base,[],{_handles:{},initializer:function(){var oPlug=this,oHost=oPlug.get('host');if(oHost.get('rendered')){oPlug.bindUI();}else{oPlug._handles.afterHostBindUI=oPlug.afterHostMethod('bindUI',function(){oPlug.bindUI();oPlug._handles.afterHostBindUI.detach();delete oPlug._handles.afterHostBindUI;});}},bindUI:function(){var oPlug=this,oHost=oPlug.get('host');oPlug._handles.afterHostVisibleChange=oHost.after('visibleChange',Y.bind(oPlug.afterHostVisibleChange,oPlug));},_bindClickAnywhereToClose:function(){var oPlug=this;if(oPlug.get('clickAnywhereToClose.enabled')&&!oPlug._handles.onClickAnywhereToCloseClick){oPlug._handles.onClickAnywhereToCloseClick=Y.one('body').on('click',Y.bind(oPlug.onClickAnywhereToCloseClick,oPlug));}},_detachClickAnywhereToClose:function(){var oPlug=this;if(oPlug._handles.onClickAnywhereToCloseClick){oPlug._handles.onClickAnywhereToCloseClick.detach();delete oPlug._handles.onClickAnywhereToCloseClick;}},_bindEsc:function(){var oPlug=this;if(oPlug.get('esc')&&!oPlug._handles.onEscKeyUp){oPlug._handles.onEscKeyUp=Y.on('key',Y.bind(oPlug.onEscKeyUp,oPlug),'body','up:27');}},_detachEsc:function(){var oPlug=this;if(oPlug._handles.onEscKeyUp){oPlug._handles.onEscKeyUp.detach();delete oPlug._handles.onEscKeyUp;}},afterHostVisibleChange:function(e){var oPlug=this;if(e.newVal){oPlug._bindClickAnywhereToClose();oPlug._bindEsc();}else{oPlug._detachClickAnywhereToClose();oPlug._detachEsc();}},onClickAnywhereToCloseClick:function(e){var oPlug=this,oHost=oPlug.get('host'),boundingBox=oHost.get('boundingBox'),aIgnore=oPlug.get('clickAnywhereToClose.ignore'),targetNode=e.target,ignore=(function(){var ignore=false;Y.some(aIgnore,function(n){if(targetNode.ancestor(function(n1){return n.compareTo(n1);},true)){ignore=true;return true;}});return ignore;}());if(!boundingBox.contains(targetNode)&&!ignore){oHost.hide();}},onEscKeyUp:function(){var oPlug=this,oHost=oPlug.get('host');oHost.hide();},onCloseClick:function(e){e.halt();var oPlug=this,oHost=oPlug.get('host');oHost.hide();}},{ATTRS:{'clickAnywhereToClose':{value:{'enabled':false,'ignore':[]},validator:function(val){var valid=true;if(!Y.Lang.isObject(val)){return false;}
Y.some(val,function(v,k){if(k!=='ignore'&&k!=='enabled'){Y.log('Key passed to clickAnywhereToClose setter is invalid');valid=false;return true;}
if((k==='enabled'&&!Y.Lang.isBoolean(v))||(k==='ignore'&&!Y.Lang.isArray(v))){Y.log('Value passed to clickAnywhereToClose.'+k+' was of wrong type.');valid=false;return true;}});return valid;},setter:function(val){var oPlug=this,oHost=oPlug.get('host');Y.later(0,{},function(){if(val.enabled&&oHost.get('visible')){oPlug._bindClickAnywhereToClose();}else if(!val.enabled){oPlug._detachClickAnywhereToClose();}});},lazyAdd:false},'ignore':{value:[],validator:Y.Lang.isArray,setter:function(val){var nodes=[],node=null;Y.each(val,function(v){if(Y.Lang.isString(v)){node=Y.one(v);if(node){nodes.push(node);}}else if(Y.instanceOf(v,Y.Node)){nodes.push(v);}else{return Y.Attribute.INVALID_VALUE;}});}},'esc':{value:false,validator:Y.Lang.isBoolean,setter:function(val){var oPlug=this,oHost=oPlug.get('host');Y.later(0,{},function(){if(val&&oHost.get('visible')){oPlug._bindEsc();}else if(!val){oPlug._detachEsc();}});},lazyAdd:false},'closers':{value:null,validator:Y.Lang.isArray,setter:function(val){var oPlug=this,oHost=oPlug.get('host'),boundingBox=oHost.get('boundingBox');Y.each(oPlug._handles,function(v,k){if(k.indexOf('onCloserClick')===0){v.detach();delete k[v];}});Y.each(val,function(v,i){if(Y.Lang.isString(v)){oPlug._handles['onCloserClick'+i]=boundingBox.delegate('click',Y.bind(oPlug.onCloseClick,oPlug),v);}});},lazyAdd:false}},NS:'ysclose'});},'',{'requires':['plugin','base-build','node-event-delegate','event-key']});YUI.add('media-playernote-view',function(Y){Y.namespace('Sports.Plugin.PlayerNote.View');Y.namespace('Sports.PlayerNote.Views');Y.Sports.Plugin.PlayerNote.View=Y.Base.create('YSPlayerNoteViewPlugin',Y.Plugin.Base,[],{_handles:{},initializer:function(){var oPlug=this;oPlug.publish('enhanced',{bubbles:true,context:oPlug,defaultFn:function(){oPlug.set('enhanced',true);}});oPlug._handles.onInitializedChange=oPlug.on('initializedChange',function(e){if(e.newVal){oPlug.renderUI();oPlug.bindUI();oPlug.syncUI();oPlug._handles.onInitializedChange.detach();delete oPlug._handles.onInitializedChange;}});if(!oPlug.get('revealDelay')){oPlug.fire('enhanced');}},renderUI:function(){},bindUI:function(){},syncUI:function(){}},{ATTRS:{revealDelay:{value:false},cached:{value:true,validator:Y.Lang.isBoolean},enhanced:{value:false},payload:{value:{}},oNote:{value:null}},NS:'ysplayernoteview'});},'',{'requires':['plugin','base-build']});YUI.add('media-playernote-tabs',function(Y){Y.namespace('Sports.Plugin.PlayerNoteTabs');Y.Sports.Plugin.PlayerNoteTabs=Y.Base.create('YSPlayerNoteTabs',Y.Plugin.Base,[],{_handles:{},initializer:function(){var oPlug=this,oHost=oPlug.get('host');if(oHost.get('rendered')){oPlug.renderUI();oPlug.bindUI();}else{oPlug._handles.afterHostRenderUI=oPlug.afterHostMethod('renderUI',function(){oPlug.renderUI();oPlug._handles.afterHostRenderUI.detach();delete oPlug._handles.afterHostRenderUI;});oPlug._handles.afterHostBindUI=oPlug.afterHostMethod('bindUI',function(){oPlug.bindUI();oPlug._handles.afterHostBindUI.detach();delete oPlug._handles.afterHostBindUI;});}},renderUI:function(){var oPlug=this,oHost=oPlug.get('host'),contentBox=oHost.get('contentBox'),tabViewNode=contentBox.one('.yui3-ysplayernote-tabview'),navNode=null;contentBox.addClass('tabbed');if(tabViewNode){navNode=tabViewNode.one('.dynamicnote-tabs-hidden');if(navNode){navNode.removeClass('dynamicnote-tabs-hidden');}}},bindUI:function(){var oPlug=this,oHost=oPlug.get('host'),contentBox=oHost.get('contentBox');oPlug._handles.onTabClick=contentBox.delegate('click',Y.bind(oPlug._onTabClick,oPlug),'.dynamicnote-tabs li a');oPlug._handles.beforeCurrentViewChange=oHost.before('currentViewChange',Y.bind(oPlug._beforeCurrentViewChange,oPlug));},_onTabClick:function(e){e.halt();var oPlug=this,oHost=oPlug.get('host'),targetNode=e.target,containerNode=e.container,view=targetNode.get('href').split('#')[1];if(!targetNode.ancestor('li').hasClass('selected')){oHost.set('currentView',view);containerNode.one('li.selected').removeClass('selected');targetNode.ancestor('li').addClass('selected');Y.Fantasy.rapid.beaconClick('player-note-tabs',view);}},_beforeCurrentViewChange:function(e){var oPlug=this,oHost=oPlug.get('host'),contentBox=oHost.get('contentBox'),viewNode=oHost._getViewNode(e.prevVal),bdNode=contentBox.one('.'+oHost.getClassName()+'-bdcontent');viewNode.setStyle('display','none');if(!contentBox.one('.loading-view')){bdNode.append(oHost._getLoadingMessage());}}},{ATTRS:{},NS:'ysplayernotetabs'});},'',{'requires':['plugin','base-build','node-event-delegate','media-playernote-tabs-css']});YUI.add('media-playernote-views-notes',function(Y){Y.namespace('Sports.PlayerNoteViews.Notes');Y.Sports.PlayerNoteViews.Notes=Y.Base.create('YSPlayerNoteViewsNotes',Y.Sports.Plugin.PlayerNote.View,[],{_handles:{},renderUI:function(){var oPlug=this;oPlug.fire('enhanced');},bindUI:function(){var oPlug=this,oHost=oPlug.get('host');oPlug._handles.onTeamNoteLinkClick=oHost.delegate('click',Y.bind(oPlug._onTeamNoteLinkClick,oPlug),'.playernotes-bd a');},_onCompTabClick:function(e){e.halt();var targetNode=e.target,containerNode=e.container,navNode=containerNode.one('.comp-nav'),viewsNode=containerNode.one('div.comp-views'),index=0;navNode.get('children').some(function(n,i){if(n.compareTo(targetNode.ancestor('li'))){index=i;return true;}});viewsNode.one('div.selected').removeClass('selected');viewsNode.get('children').item(index).addClass('selected');navNode.one('li.selected').removeClass('selected');targetNode.ancestor('li').addClass('selected');},_onTeamNoteLinkClick:function(e){e.target.setAttribute('target','sports');}},{ATTRS:{},NS:'ysplayernoteview'});},'',{'requires':['media-playernote-view','media-playernote-views-notes-css','node-event-delegate','base-build','tabview']});YUI.add('media-playernote-views-twitter',function(Y){Y.namespace('Sports.PlayerNoteViews.Twitter');Y.Sports.PlayerNoteViews.Twitter=Y.Base.create('YSPlayerNoteViewsTwitter',Y.Sports.Plugin.PlayerNote.View,[],{_handles:{},_curType:'twitter-official',initializer:function(){},renderUI:function(){var oPlug=this,oNode=oPlug.get('host'),payload=oPlug.get('payload'),contentBox=oNode.ancestor('.yui3-ysplayernote'),teamNode=contentBox.one('.player-team-name'),playerNode=contentBox.one('.name'),team_name=(teamNode)?teamNode.getAttribute('data-twitteracct'):'',player_name=(playerNode)?playerNode.get('innerHTML'):'',twitter_type='official';oPlug.set('teamName',team_name);oPlug.set('playerName',player_name);oNode.set('innerHTML',oPlug.get('tweetNav'));if(payload[0]&&payload[0].team_tweets){oNode.append(oPlug._buildTweetMarkup(payload[0].team_tweets,twitter_type));}else{oNode.append('<ul class="twitter-'+twitter_type+' twitter-view"><li class="notweets">No recent tweets found.</li></ul>');}
twitter_type='search';if(payload[1]&&payload[1].player_tweets){oNode.append(oPlug._buildTweetMarkup(payload[1].player_tweets,twitter_type));}else{oNode.append('<ul class="twitter-'+twitter_type+' twitter-view"><li class="notweets">No recent tweets found.</li></ul>');}},_buildTweetMarkup:function(tweets,tweet_type){var oPlug=this,content=['<ul class="twitter-'+tweet_type+' twitter-view">'],player_name=oPlug.get('playerName'),team_name=oPlug.get('teamName'),type;if(tweet_type==='official'){type='team_tweets';}else{type='player_tweets';}
if(tweets.length===0){content.push('<li class="noresults">No Twitter results.</li>');}
Y.each(tweets,function(v,i,a){var menuclass=[],result=v,icon=result.user_profile_image_url,user=result.user_screen_name,userURL="http://twitter.com/"+user,tweet='',posted=result.created_at_formatted;if(i%2){menuclass.push("even");}else{menuclass.push("odd");}
if(i===0){menuclass.push("first");}else if(i===(a.length-1)){menuclass.push("last");}
tweet=result.text.replace(new RegExp(player_name,'i'),'<span>'+player_name+'</span>');if(oPlug._curType!=='official'){tweet=result.text.replace(new RegExp(team_name,'i'),'<span>'+team_name+'</span>');}
tweet=tweet.replace(/(ftp|http|https|file):\/\/[\S]+(\b|$)/gim,'<a href="$&" target="sports">$&</a>');tweet=tweet.replace(/@([a-zA-Z0-9_]+)/gi,'<a target="_blank" href="http://twitter.com/$1" target="_blank" class="username">@$1<\/a>');tweet=tweet.replace(/#([a-zA-Z0-9_]+)/gi,'<a target="_blank" href="http://search.twitter.com/search?q=%23$1" target="_blank" class="hashtag">#$1<\/a>');posted=(oPlug._tweetTimestamp(posted))?'<span class="time">('+oPlug._tweetTimestamp(posted)+')</span>':'';content.push('<li class="'+menuclass.join(' ')+'"><a target="_blank" href="'+userURL+'" class="avatar" style="background-image: url('+icon+');">'+user+'</a><strong><a target="_blank" href="'+userURL+'">'+user+'</a></strong>: '+tweet+'<br />'+posted+'</li>');});content.push('</ul>');return content.join('');},bindUI:function(){var oPlug=this,oNode=oPlug.get('host');oPlug._handles.onTwitNavClick=oNode.delegate('click',Y.bind(oPlug._onTwitNavClick,oPlug),'.twitternav a');},_onTwitNavClick:function(e){e.halt();var oPlug=this,oNode=oPlug.get('host'),currentTarget=e.currentTarget,liNode=currentTarget.ancestor('li'),new_type=(liNode.hasClass('twitter-official'))?'twitter-official':'twitter-search';if(oPlug._curType!==new_type){oNode.one('.twitternav .selected').removeClass('selected');oNode.one('.twitternav .'+new_type).addClass('selected');oNode.all('.twitter-view').setStyle('display','none');oNode.one('.twitter-view.'+new_type).setStyle('display','block');oPlug._curType=new_type;}},_tweetTimestamp:function(a){var b=new Date(),c=new Date(a),d,e,minute,hour,day,week;if(Y.UA.ie>0){c=Date.parse(a.replace(/( \+)/,' UTC$1'));}
d=b-c;e=1000;minute=e*60;hour=minute*60;day=hour*24;week=day*7;if(isNaN(d)||d<0){return"";}
if(d<e*7){return"right now";}
if(d<minute){return Math.floor(d/e)+" seconds ago";}
if(d<minute*2){return"about 1 minute ago";}
if(d<hour){return Math.floor(d/minute)+" minutes ago";}
if(d<hour*2){return"about 1 hour ago";}
if(d<day){return Math.floor(d/hour)+" hours ago";}
if(d>day&&d<day*2){return"yesterday";}
if(d<day*365){return Math.floor(d/day)+" days ago";}
return"over a year ago";},syncUI:function(){var oPlug=this;oPlug.fire('enhanced');}},{ATTRS:{revealDelay:{value:true},teamName:{value:''},playerName:{value:''},tweetNav:{value:'<ul class="twitternav navlist"><li class="official-nav twitter-official selected""><a class="official-nav-item" href="#">Official Team Feed</a></li><li class="search-nav twitter-search"><a class="search-nav-item" href="#">Twitter Search</a></li></ul>'}},NS:'ysplayernoteview'});},'',{'requires':['media-playernote-view','media-playernote-views-twitter-css','node-event-delegate','node-style','selector-css3']});YUI.add('media-playernote-views-availability',function(Y){Y.namespace('Sports.PlayerNoteViews.Availability');Y.Sports.PlayerNoteViews.Availability=Y.Base.create('YSPlayerNoteViewsAvailability',Y.Sports.Plugin.PlayerNote.View,[],{initializer:function(){},renderUI:function(){var oPlug=this,oNote=oPlug.get('oNote');this.get('host').set('innerHTML',oNote._newContent);},bindUI:function(){var oPlug=this,oNote=oPlug.get('oNote');oPlug._handles.afterNoteVisibleChange=oNote.after('visibleChange',Y.bind(oPlug._afterNoteVisibleChange,oPlug));oPlug._handles.onNoteCurrentViewChange=oNote.on('currentViewChange',Y.bind(oPlug._afterNoteVisibleChange,oPlug));},_afterNoteVisibleChange:function(e){var oPlug=this,oNote=oPlug.get('oNote');if(e.newVal){this.get('host').set('innerHTML',oNote._newContent);}else if(oNote.get('currentview')!=='availability'){this.get('host').empty(true);}},syncUI:function(){var oPlug=this;oPlug.fire('enhanced');}},{ATTRS:{},NS:'ysplayernoteview'});},'',{'requires':['media-playernote-view']});YUI.add('media-playernote-views-history',function(Y){Y.namespace('Sports.PlayerNoteViews.History');Y.Sports.PlayerNoteViews.History=Y.Base.create('YSPlayerNoteViewsHistory',Y.Sports.Plugin.PlayerNote.View,[],{initializer:function(){},renderUI:function(){var oPlug=this,oNote=oPlug.get('oNote');this.get('host').set('innerHTML',oNote._newContent);},bindUI:function(){var oPlug=this,oNote=oPlug.get('oNote');oPlug._handles.afterNoteVisibleChange=oNote.after('visibleChange',Y.bind(oPlug._afterNoteVisibleChange,oPlug));oPlug._handles.onNoteCurrentViewChange=oNote.on('currentViewChange',Y.bind(oPlug._afterNoteVisibleChange,oPlug));},_afterNoteVisibleChange:function(e){var oPlug=this,oNote=oPlug.get('oNote');if(e.newVal){this.get('host').set('innerHTML',oNote._newContent);}else if(oNote.get('currentView')!=='history'){this.get('host').empty(true);}},syncUI:function(){var oPlug=this;oPlug.fire('enhanced');}},{ATTRS:{},NS:'ysplayernoteview'});},'',{'requires':['media-playernote-view']});YUI.add('media-playernote-views-video',function(Y){Y.namespace('Sports.PlayerNoteViews.Video');Y.Sports.PlayerNoteViews.Video=Y.Base.create('YSPlayerNoteViewsVideo',Y.Sports.Plugin.PlayerNote.View,[],{initializer:function(){var oPlug=this,payload=oPlug.get('payload'),mediaId=(payload[0]&&payload[0].mediaId)?payload[0].mediaId:null;oPlug.set('mediaId',mediaId);},renderUI:function(){this._renderVideo();},_renderVideo:function(){var oPlug=this,mediaId=oPlug.get('mediaId'),videoNode=oPlug.get('videoNode'),oPlayer=oPlug.get('oPlayer');if(mediaId&&oPlayer){oPlayer.init({'size':[480,269],'mediaId':mediaId,'mdbId':0,'el':Y.Node.getDOMNode(videoNode),'shareUrl':''});}},_destroyVideo:function(){this.get('videoNode').empty(true);},bindUI:function(){var oPlug=this,oNote=oPlug.get('oNote');oPlug._handles.afterNoteVisibleChange=oNote.after('visibleChange',Y.bind(oPlug._afterNoteVisibleChange,oPlug));oPlug._handles.onNoteCurrentViewChange=oNote.on('currentViewChange',Y.bind(oPlug._onNoteCurrentViewChange,oPlug));},_afterNoteVisibleChange:function(e){var oPlug=this,oNote=oPlug.get('oNote');if(e.newVal){oPlug._renderVideo();}else if(oNote.get('currentview')!=='video'){oPlug._destroyVideo();}},_onNoteCurrentViewChange:function(e){var oPlug=this;if(e.newVal!=='video'){oPlug._destroyVideo();}else{oPlug._renderVideo();}},syncUI:function(){var oPlug=this;oPlug.fire('enhanced');}},{ATTRS:{mediaId:{value:null},videoNode:{valueFn:function(){return this.get('host').one('.player-swf');}},oPlayer:{valueFn:function(){return YAHOO.Media.Player.summon();}}},NS:'ysplayernoteview'});},'',{'requires':['media-playernote-view']});YUI.add('media-playernote',function(Y){Y.namespace('Sports');var detachAfterViewEnhanced=function(oMod,oView,type){if(oMod._handles['afterViewEnhanced'+type]){oMod._handles['afterViewEnhanced'+type].detach();delete oMod._handles['afterViewEnhanced'+type];}},bindAfterViewEnhanced=function(oMod,oView,type){if(!oView.get('enhanced')){oMod._handles['afterViewEnhanced'+type]=oView.after('enhanced',Y.bind(function(){oMod.fire('reveal');detachAfterViewEnhanced(oMod,oView);},oMod));}else{oMod.fire('reveal');}};Y.Sports.PlayerNote=Y.Base.create('YSPlayerNote',Y.Overlay,[],{_handles:{},_curIO:null,_newContent:null,initializer:function(){var oMod=this;oMod.plug(Y.Sports.Plugin.Overlay.Surround,{indicator:true,resetAlignOnResize:true,surround:{enabled:true,sides:['L','R'],buffer:20}}).plug(Y.Sports.Plugin.Overlay.Close,{clickAnywhereToClose:{enabled:true},closers:['a.'+oMod.getClassName()+'-close'],esc:true}).get('contentBox').plug(Y.Plugin.Drag,{handles:['.yui3-widget-hd']});oMod.publish('initialLoad',{bubbles:true,context:oMod,defaultFn:function(){oMod.fire('load');}});oMod.publish('load',{bubbles:true,context:oMod,defaultFn:oMod._updateContent});oMod.publish('reveal',{bubbles:true,context:oMod,defaultFn:oMod._revealContent});oMod.addTarget(Y.Global);},renderUI:function(){var oMod=this;oMod.set('bodyContent','<div class="'+oMod.getClassName()+'-bdcontent">'+oMod._getLoadingMessage()+'    </div>').set('headerContent',Y.substitute('<h5>Yahoo! Sports Player Note <a class="{className}-close" href="#">close not    e</a></h5>',{"className":oMod.getClassName()})).set('footerContent','');oMod.set('zIndex','9999999');if(Y.UA.ie&&Y.UA.ie<9){oMod.set('bodyContent','<div class="'+oMod.getClassName()+'-bdcontent">'+oMod._getLoadingMessage()+'</div>').set('headerContent',Y.substitute('<h5>Yahoo! Sports Player Note <a class="{className}-close close" href="#">close note</a></h5>',{"className":oMod.getClassName()})).set('footerContent','');}else{oMod.set('bodyContent','<div class="'+oMod.getClassName()+'-bdcontent">'+oMod._getLoadingMessage()+'</div>').set('headerContent',Y.substitute('<h5>Yahoo! Sports Player Note <a class="{className}-close F-icon Fz-xs F-shade3" href="#">&#xe009;</a></h5>',{"className":oMod.getClassName()})).set('footerContent','');}},bindUI:function(){var oMod=this,contentBox=oMod.get('contentBox');oMod._handles.beforeCurrentViewChange=oMod.before('currentViewChange',Y.bind(oMod._beforeCurrentViewChange,oMod));oMod._handles.afterCurrentViewChange=oMod.after('currentViewChange',Y.bind(oMod._afterCurrentViewChange,oMod));oMod._handles.beforeVisibleChange=oMod.before('visibleChange',Y.bind(oMod._beforeVisibleChange,oMod));oMod._handles.afterVisibleChange=oMod.after('visibleChange',Y.bind(oMod._afterVisibleChange,oMod));oMod._handles.onDDDragStart=contentBox.dd.on('drag:start',Y.bind(oMod._onDDDragStart,oMod));},_beforeVisibleChange:function(e){var oMod=this,yssurround=oMod.yssurround;if(e.newVal){oMod.get('contentBox').setStyle('left','');}
if(e.newVal&&(!yssurround||!yssurround._resizing)){oMod._populate();}},_afterVisibleChange:function(e){var oMod=this;if(!e.newVal){oMod.get('contentBox').setStyle('left','-9999em');}},_beforeCurrentViewChange:function(e){var oMod=this,currentView=e.prevVal;if(!oMod._isViewCached(currentView)){oMod._getViewNode(currentView).unplug();}},_afterCurrentViewChange:function(e){var oMod=this;if(e.newVal!==e.oldVal){oMod._populate();}},_onDDDragStart:function(){var oMod=this,yssurround=oMod.yssurround;if(yssurround&&yssurround.get('indicator')){yssurround.hideIndicator();}},_onNoteIOSuccess:function(id,o){var oMod=this,oView=null,oViews,oPlug,response,content,errors,payload,currentView,viewNode;try{response=Y.JSON.parse(o.responseText);content=response.content||'';errors=response.errors||[];payload=response.objects||{};currentView=oMod.get('currentView');viewNode=null;if(!errors||errors.length===0){oMod._newContent=content;if(oMod.get('initialLoad')){oMod.fire('initialLoad');}else{oMod.fire('load');}
viewNode=oMod._getViewNode(currentView);oViews=Y.Sports.PlayerNoteViews;oPlug=(oViews)?oViews[currentView.substring(0,1).toUpperCase()+currentView.substring(1)]:null;if(oPlug){viewNode.plug(oPlug,{payload:payload,oNote:oMod});}else{viewNode.plug(Y.Sports.Plugin.PlayerNote.View,{payload:payload,oNote:oMod});}
oView=viewNode.ysplayernoteview;bindAfterViewEnhanced(oMod,oView,currentView);}}catch(e){Y.log(e);oMod._hideAndLaunchHref();}},_getLoadingMessage:function(){var oMod=this,currentView=oMod.get('currentView');return Y.substitute('<p class="loading-view">Loading Player {view}.....</p>',{"view":currentView.charAt(0).toUpperCase()+currentView.substring(1)});},_getNoteUrl:function(cached){var oMod=this,base_url=oMod.get('noteUrlFormatter')();if(cached){if(base_url.indexOf('?')>-1){base_url=base_url.replace('?','?pvonly=1&');}else if(base_url.indexOf('#')>-1){base_url=base_url.replace('#','?pvonly=1&#');}else{base_url+='?pvonly=1';}}
return base_url;},_getComscoreUrl:function(){var oMod=this;return oMod.get('comscoreUrlFormatter')();},_populate:function(){var oMod=this,currentView=oMod.get('currentView'),cached=oMod._isViewCached(currentView),noteUrl=oMod._getNoteUrl(cached),cfg={method:'GET',headers:{"Ajax-Request":"true"}};if(!cached){Y.mix(cfg,{context:oMod,on:{'success':oMod._onNoteIOSuccess}});}else{oMod.fire('load');oMod.fire('reveal');}
if(noteUrl){Y.io(noteUrl,cfg);}else{oMod._hideAndLaunchHref();}},_updateContent:function(){var oMod=this,currentView=oMod.get('currentView'),cached=oMod._isViewCached(currentView),content,contentBox,initialLoad,newNode,bdNode,ftNode,newBdNode,newFtNode,viewNode;if(!cached){content=oMod._newContent;contentBox=oMod.get('contentBox');initialLoad=oMod.get('initialLoad');newNode=Y.Node.create('<div>'+content+'</div>');bdNode=contentBox.one('.'+oMod.getClassName()+'-bdcontent');ftNode=contentBox.one('.'+oMod.getClassName()+'-ftcontent');newBdNode=newNode.one('div.dynamicnote');newFtNode=newNode.one('div.playernotepromos');viewNode=(bdNode)?oMod._getViewNode(currentView):null;if(initialLoad){newBdNode.all('.playernoteview').setStyle('display','none');oMod.set('bodyContent',bdNode.append(newBdNode));oMod.set('initialLoad',false);}else if(viewNode&&newNode.get('children')){viewNode.empty(true).append(newNode.get('children'));}
if(Y.Sports.Plugin.PlayerNoteTabs){oMod.plug(Y.Sports.Plugin.PlayerNoteTabs);}
if(newFtNode&&ftNode){oMod.set('footerContent',ftNode.empty(true).append(newFtNode));}}},_revealContent:function(){var oMod=this,currentView=oMod.get('currentView'),viewNode=oMod._getViewNode(currentView);oMod.removeLoadingMessage();oMod.fireComscorePageView();viewNode.setStyle('display','');Y.Fantasy.Headshot.init('.yui3-ysplayernote');},_hideAndLaunchHref:function(){var oMod=this,noteNode=oMod.get('noteNode'),href=(noteNode)?noteNode.get('href'):null;Y.later(0,oMod,oMod.hide);if(href){window.open(href,'sports');}},_getViewNode:function(type){var oMod=this,contentBox=oMod.get('contentBox'),node=null;if(type&&Y.Lang.isString(type)){node=contentBox.one('.playernoteview-'+type);}
return node;},getCurrentViewNode:function(){var oMod=this,contentBox=oMod.get('contentBox'),currentView=oMod.get('currentView');return contentBox.one('.playernoteview-'+currentView);},_isViewCached:function(type){var oMod=this,viewNode=oMod._getViewNode(type),oView=(viewNode&&viewNode.ysplayernoteview)?viewNode.ysplayernoteview:null,cached=false;if(oView){cached=oView.get('cached');}
return cached;},fireComscorePageView:function(){var oMod=this;Y.io(oMod._getComscoreUrl());},removeLoadingMessage:function(){var oMod=this,contentBox=oMod.get('contentBox'),loadingNode=contentBox.one('.loading-view');if(loadingNode){loadingNode.remove(true);}},destructor:function(){}},{ATTRS:{initialLoad:{value:true,validator:Y.Lang.isBoolean},currentView:{value:'',validator:Y.Lang.isString,setter:function(val){var oMod=this;if(oMod.get('initialView')===''){oMod.set('initialView',val);}}},initialView:{value:'',validator:Y.Lang.isString},pid:{value:null},pidParser:{value:function(node){return node.getAttribute('data-ys-playerid');},validator:Y.Lang.isFunction,lazyAdd:false},noteNode:{value:null,setter:function(val){var oMod=this,node=null,pid,view;if(!Y.Lang.isNull(val)&&!Y.Lang.isString(val)&&!Y.instanceOf(val,Y.Node)){Y.log('noteNode value was not a Node instance or selector string.  NoteNode not set.');}else if(Y.Lang.isString(val)){node=Y.one(val);}else{node=val;}
if(node){pid=oMod.get('pidParser')(node);view=node.getAttribute('data-ys-playernote-view');view=view||'notes';oMod.set('currentView',view);oMod.set('pid',pid);}
return node;},lazyAdd:false},comscoreUrlFormatter:{value:function(){return null;},validator:Y.Lang.isFunction},noteUrlFormatter:{value:function(){return null;},validator:Y.Lang.isFunction}}});},'',{'requires':['overlay','io-base','json-parse','media-overlay-surround','media-overlay-close','dd-plugin','media-playernote-css','substitute','media-playernote-view','media-playernote-tabs','ysf-headshot']});YUI.add('media-playernotes',(function(){var PlayerNotes=null,oNotes={},oOpenNote=null;return function(Y){Y.namespace('Sports');var prevNextTemplate='<a class="playernote-prev">Previous Player</a> | <a class="playernote-next">Next Player</a>',prevTemplate='<a class="playernote-prev">Previous Player</a>',nextTemplate='<a class="playernote-next">Next Player</a>',generatePlayerNote=function(anchorNode){var pid='',oNote=null,initialLoad,enumerate;oNote=new Y.Sports.PlayerNote({noteNode:anchorNode,pidParser:PlayerNotes.get('pidParser'),zIndex:PlayerNotes.get('zIndex')}).render();initialLoad=PlayerNotes.get('initialLoad');enumerate=PlayerNotes.get('enumerate');oNote.set('noteUrlFormatter',Y.bind(PlayerNotes.get('noteUrlFormatter'),oNote));oNote.set('comscoreUrlFormatter',Y.bind(PlayerNotes.get('comscoreUrlFormatter'),oNote));oNote.yssurround.set('surround.node',anchorNode);oNote.ysclose.set('clickAnywhereToClose.ignore',[anchorNode]);pid=oNote.get('pid');PlayerNotes._handles[pid]={};if(enumerate){PlayerNotes._handles[pid].afterInitialLoadEnumerate=oNote.after('initialLoad',Y.bind(afterInitialLoadEnumerate,oNote));}
oNotes[pid]=oNote;return oNotes[pid];},showPlayerNote=function(anchorNode){var pid=PlayerNotes.get('pidParser')(anchorNode),href=null,oNote=null;if(pid){anchorNode.focus();if(!oNotes[pid]){oNotes[pid]='loading';oNote=generatePlayerNote(anchorNode);oNote.show();}else if(oNotes[pid]==='loading'||oNotes[pid].get('visible')){return;}else{oNote=oNotes[pid];oNote.set('pid',pid).yssurround.set('surround.node',anchorNode);oNote.ysclose.set('clickAnywhereToClose.ignore',[anchorNode]);oNote.show();}
if(oOpenNote&&oOpenNote!==oNote&&oOpenNote.get('visible')){oOpenNote.hide();anchorNode.blur();}
oOpenNote=oNote;}else{href=anchorNode.get('href');if(href){window.open(href,'sports');}}},onEnumeratePrevClick=function(e){e.halt();var oNote=this,noteNode=oNote.get('noteNode'),noteNodes=PlayerNotes.get('noteNodes'),is_node=false;Y.Array.some(noteNodes,function(n,i){is_node=noteNode.compareTo(n);if(is_node){oNote.hide();showPlayerNote(noteNodes[i-1]);return true;}});},onEnumerateNextClick=function(e){e.halt();var oNote=this,noteNode=oNote.get('noteNode'),noteNodes=PlayerNotes.get('noteNodes'),is_node=false;Y.Array.some(noteNodes,function(n,i){is_node=noteNode.compareTo(n);if(is_node){oNote.hide();showPlayerNote(noteNodes[i+1]);return true;}});},bindEnumerate=function(oNote){var contentBox=oNote.get('contentBox'),pid=oNote.get('pid');PlayerNotes._handles[pid].onEnumeratePrevClick=contentBox.delegate('click',Y.bind(onEnumeratePrevClick,oNote),'a.playernote-prev');PlayerNotes._handles[pid].onEnumerateNextClick=contentBox.delegate('click',Y.bind(onEnumerateNextClick,oNote),'a.playernote-next');},afterInitialLoadEnumerate=function(){var oNote=this,pid=oNote.get('pid'),noteNode=oNote.get('noteNode'),navNodes=oNote.get('contentBox').all('.playernote-nav'),noteNodes=PlayerNotes.get('noteNodes'),size=noteNodes.length,noteIndex=Y.Array.indexOf(noteNodes,noteNode);if(PlayerNotes.get('enumerate')&&navNodes&&size>1){if(noteIndex===0){navNodes.setContent(nextTemplate);}else if(noteIndex===(size-1)){navNodes.setContent(prevTemplate);}else{navNodes.setContent(prevNextTemplate);}
bindEnumerate(oNote);}
PlayerNotes._handles[pid].afterInitialLoadEnumerate.detach();delete PlayerNotes._handles[pid].afterInitialLoadEnumerate;},detachEnumerate=function(oNote){var pid=oNote.get('pid');Y.each(PlayerNotes._handles[pid],function(v,k,o){if(k.indexOf('onEnumerate')==='0'){v.detach();delete o[k];}});},destroyEnumerate=function(oNote){var navNodes=oNote.get('contentBox').all('.playernote-nav');if(navNodes){navNodes.each(function(n){n.clear(true);});detachEnumerate(oNote);}};if(!PlayerNotes){PlayerNotes=Y.Base.create('YSPlayerNotes',Y.Base,[],{_handles:{},initializer:function(){var oMod=this;oMod._handles.afterNoteSelectorChange=oMod.after('noteSelectorChange',function(){oMod._detachNoteDelegate();oMod._bindNoteDelegate();});oMod._bindNoteDelegate();},_bindNoteDelegate:function(){var oMod=this;if(!oMod._handles.onBodyClick){oMod._handles.onBodyClick=Y.one(Y.config.doc).delegate('click',function(e){e.halt();var anchorNode=e.currentTarget;showPlayerNote(anchorNode);},oMod.get('noteSelector'));}},_detachNoteDelegate:function(){var oMod=this;if(oMod._handles.onBodyClick){oMod._handles.onBodyClick.detach();delete oMod._handles.onBodyClick;}},destroyAllNotes:function(){Y.each(oNotes,function(v){v.destroy();});oNotes={};},destructor:function(){var oMod=this;oMod._handles.onBodyClick.detach();oMod.destroyAllNotes();}},{ATTRS:{noteSelector:{value:'a.playernote[data-ys-playerid]',validator:Y.Lang.isString,lazyAdd:false},noteNodes:{value:null,setter:function(){var oMod=this,noteArray=[],noteNodes=Y.all(oMod.get('noteSelector'));noteNodes.each(function(node){if(oMod.get('pidParser')(node)!==null){noteArray.push(node);}});return noteArray;},writeOnce:true},pidParser:{value:function(node){return node.getAttribute('data-ys-playerid');},validator:Y.Lang.isFunction,setter:function(val){Y.each(oNotes,function(v){if(v!=='loading'){v.set('pidParser',val);}});}},noteUrlFormatter:{value:function(){return null;},validator:function(val){return Y.Lang.isFunction(val);},setter:function(val){Y.each(oNotes,function(v){if(v!=='loading'){v.set('noteUrlFormatter',val);}});}},comscoreUrlFormatter:{value:function(){return null;},validator:function(val){return Y.Lang.isFunction(val);},setter:function(val){Y.each(oNotes,function(v){if(v!=='loading'){v.set('comscoreUrlFormatter',val);}});}},zIndex:{value:0,validator:Y.Lang.isNumber,setter:function(val){Y.each(oNotes,function(v){if(v!=='loading'){v.set('zIndex',val);}});}},enumerate:{value:false,validator:Y.Lang.isBoolean,lazyAdd:false}}});PlayerNotes=new PlayerNotes();}
Y.Sports.PlayerNotes=PlayerNotes;};}()),'',{'requires':['node-event-delegate','base-build','selector-css3','media-playernote']});YUI.add('ysf-ads',function(Y){if(!Y.Lang.isUndefined(YUI.Sports)&&!Y.Lang.isUndefined(YUI.Sports.Ads)){return;}
Y.namespace('Sports.Ads');Y.Sports.Ads={path:YUI.Fantasy.adPath,status:'uninitiated',getAttempt:null,getAttemptCount:0,load:function(){if(this.status!='dead'){Y.Sports.Ads.createCallFrame();if(Y.Get&&!this.getAttempt&&this.status!='ready'){this.getAttempt=Y.Get.script(this.path,{onSuccess:this.loadSuccess,onFailure:this.loadFailure,onTimeout:this.loadTimeout,data:this,timeout:10000,varName:["YAHOO.ads.darla"]});this.status='loading';}
return;}},loadSuccess:function(){Y.Sports.Ads.getAttempt=null;Y.Sports.Ads.status='ready';},loadFailure:function(){Y.Sports.Ads.getAttemptCount++;Y.Sports.Ads.status=(Y.Sports.Ads.getAttemptCount>4)?'failed':'dead';},loadTimeout:function(){Y.Sports.Ads.status='dead';},createCallFrame:function(){var cfID=Y.Sports.Ads.config.callFrame;if(!document.getElementById(cfID)){var callframe=document.createElement('iframe');callframe.id=cfID;callframe.style.display='none';document.body.appendChild(callframe);}},registerAd:function(position,elementID){if(typeof Y.Sports.Ads.config.destinationMap[position]=="undefined"){Y.Sports.Ads.config.destinationMap[position]=[];}
if(typeof Y.Sports.Ads.config.destinationMap[position][elementID]=="undefined"){Y.Sports.Ads.config.destinationMap[position].push(elementID);}},unregisterAd:function(position,elementID){if(Y.Sports.Ads.config.destinationMap[position][elementID]!='undefined'){var oldMap=Y.Sports.Ads.config.destinationMap[position];var newMap=[];for(i=0;i<oldMap.length;i++){if(oldMap[i]!=elementID)newMap.push(oldMap[i]);}
Y.Sports.Ads.config.destinationMap[position]=newMap;}},registerEvent:function(eventName,o){if(typeof Y.Sports.Ads.config.events[eventName]=="undefined"){return Y.Sports.Ads.config.events[eventName]=o;}
else return Y.Sports.Ads.config.events[eventName];},subscribe:function(element,action,adObject){return;if(this.status=='dead')return;if(this.status!='ready'){this.load();setTimeout(function(){Y.Sports.Ads.subscribe(element,action,adObject);},1000);return;}
for(idx in adObject){adObject[idx]=this.validateSiteAttributes(adObject[idx]);}
var oIdx,oAdParam;if(typeof adObject=="object"){for(idx in adObject){oIdx=idx;};oAdParam=this.registerEvent(oIdx,adObject[oIdx]);}
else{oIdx=adObject;oAdParam=this.registerEvent(adObject);};var oAdConf={action:oIdx,lv:oAdParam.lv};switch(action){case"now":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);setTimeout(this.fireInitialEvent,0);}
else{this.temp.oAdConfArr.push(oAdConf);};break;case"pageload":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);Y.on('load',Y.Sports.Ads.fireInitialEvent);}
else{this.temp.oAdConfArr.push(oAdConf);};break;default:YAHOO.util.Event.on(element,action,this.fireEvent,oAdConf);break;}},validateSiteAttributes:function(e){var siteAttrs='',newVal='',emStr='';e=(!e)?{}:e;e.em=e.em||{};var siteAttrs=e.em['site-attribute']||'game=<?php echo $ad_stamp; ?>';if(siteAttrs.indexOf('game=')<0){if(e.em['site-attribute']!=''){siteAttrs=siteAttrs+'game=<?php echo $ad_stamp; ?>;';}else{siteAttrs='game=<?php echo $ad_stamp; ?>;';}}
e.em['site-attribute']=siteAttrs;for(idx in e.em){if(emStr!=''){emStr+=',';}
newVal=(Y.Lang.isString(e.em[idx]))?"'"+e.em[idx]+"'":e.em[idx];emStr+=(idx+':'+newVal);}
emStr='{'+emStr+'}';e.em=encodeURIComponent(emStr);return e;},fireEvent:function(e,obj){YAHOO.ads.darla.event(obj.action,{lv:obj.lv});},fireInitialEvent:function(){if(window.YAHOO.ads.darla)YAHOO.ads.darla.setConfig(Y.Sports.Ads.config);for(idx in Y.Sports.Ads.temp.oAdConfArr){Y.Sports.Ads.fireEvent(null,Y.Sports.Ads.temp.oAdConfArr[idx]);}
Y.Sports.Ads.temp.oAdConf=null;Y.Sports.Ads.temp=null;Y.later(2000,Y.Sports.Ads,Y.Sports.Ads.setRotation);},setRotation:function(){Y.Sports.Ads.config.rotation=Y.Sports.Ads.config.rotation=Y.Sports.Ads.config.finalRotation;},temp:null};Y.Sports.Ads.config={callFrame:"fccall",callScript:"fc",rotation:0,finalRotation:3000,autoRotation:false,property:"fantasy",destinationMap:{},events:{}};Y.Sports.Ads.showAds={'bracketwizard':true}
YUI.namespace("Sports.Ads");YUI.Sports.Ads=Y.Sports.Ads;});